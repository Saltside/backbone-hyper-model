language: node_js
node_js:
  - "0.10"
  - "0.11"

cache:
  directories:
    - node_modules

branches:
  except:
    - gh-pages

env:
  global:
    - secure: "O1YZIFmkKMJ0ZSnwc43PnRN5LhZGFsRnQm99RLYm4vkb5jg49rYCkekpNoullpqc+/Msz88KetbdMZciBiB+9S2gL4jAJLjWPIQrwwkrCPwslE5FVc8jMNiuTV7SMel3M5V3A7Ss1O5Er7NQUlEdChMMT4FACU0NjCFQGG/3xHI="

after_success:
  - "./tools/coverage"
  - "./tools/docs"

deploy:
  provider: npm
  email: github-com@agachi.name
  api_key:
    secure: "EfOGOLLMiqi1L7+6BgC64VTU1jrJ2WJGc5jLUwkUZenMuxlKRgfqDKnPNjT6Bm+rhRNCJJ8d+oe4oSYpECeEZmch7KK1mV6bHqCHN5NTIzEL1G5RJhQ0myquIVJ7vWe/3gUEvmytByDRCi7bZDyPMWhURajds7G7KMUZGITB/jE="
  on:
    tags: true
    repo: avaly/backbone-hyper-model
    # Required due to https://github.com/travis-ci/travis-ci/issues/1675
    all_branches: true
